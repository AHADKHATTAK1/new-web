<!-- ========================= Trending Products Start ================================ -->
<section class="trending-products overflow-hidden">
    <div class="container container-lg">
        <div class="border border-gray-100 p-24 rounded-16">
            <div class="section-heading mb-24">
                <div class="flex-between flex-wrap gap-8">
                    <h6 class="mb-0 wow fadeInLeft">{{ section.settings.heading | default: 'Trending Products' }}</h6>
                    <ul class="nav common-tab style-two nav-pills wow fadeInRight" id="pills-tab" role="tablist">
                        {% for block in section.blocks %}
                            {% if block.type == 'category_tab' %}
                            <li class="nav-item" role="presentation">
                                <button class="nav-link fw-medium text-sm hover-border-main-600 {% if forloop.first %}active{% endif %}" 
                                        id="pills-{{ block.id }}-tab" 
                                        data-bs-toggle="pill" 
                                        data-bs-target="#pills-{{ block.id }}" 
                                        type="button" 
                                        role="tab" 
                                        aria-controls="pills-{{ block.id }}" 
                                        aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
                                    {{ block.settings.tab_title }}
                                </button>
                            </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>

            {% if section.settings.show_featured_banner %}
            <div class="rounded-16 overflow-hidden flex-between position-relative mb-24">
                {% if section.settings.banner_background != blank %}
                <img src="{{ section.settings.banner_background | image_url: width: 1200 }}" alt="" class="banner-img position-absolute inset-block-start-0 inset-inline-start-0 w-100 h-100 z-n1 object-fit-cover rounded-24">
                {% endif %}

                {% if section.settings.banner_image_left != blank %}
                <img src="{{ section.settings.banner_image_left | image_url: width: 400 }}" alt="" class="d-xl-block d-none ps-xxl-5 ps-md-4" data-aos="zoom-in" data-aos-duration="800">
                {% endif %}
                
                <div class="trending-products-box__content px-4 d-block w-100 text-center py-72 wow bounceIn">
                    <h5 class="mb-0 trending-products-box__title text-white fw-semibold">{{ section.settings.banner_text }}</h5>
                </div>
                
                {% if section.settings.banner_image_right != blank %}
                <img src="{{ section.settings.banner_image_right | image_url: width: 400 }}" alt="" class="d-xl-block d-none pe-xxl-5 me-xxl-5 pe-md-4" data-aos="zoom-in" data-aos-duration="800">
                {% endif %}
            </div>
            {% endif %}

            <div class="tab-content" id="pills-tabContent">
                {% for block in section.blocks %}
                    {% if block.type == 'category_tab' %}
                    <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" 
                         id="pills-{{ block.id }}" 
                         role="tabpanel" 
                         aria-labelledby="pills-{{ block.id }}-tab">
                        <div class="row g-12">
                            {% assign collection = collections[block.settings.collection] %}
                            {% if collection != blank and collection.products.size > 0 %}
                                {% for product in collection.products limit: 12 %}
                                <div class="col-xxl-2 col-xl-3 col-lg-4 col-sm-6" data-aos="fade-up" data-aos-duration="{{ forloop.index | times: 200 }}">
                                    {% render 'product-card', product: product %}
                                </div>
                                {% endfor %}
                            {% else %}
                                {% for i in (1..6) %}
                                <div class="col-xxl-2 col-xl-3 col-lg-4 col-sm-6" data-aos="fade-up" data-aos-duration="{{ i | times: 200 }}">
                                    {% render 'product-card-placeholder' %}
                                </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</section>
<!-- ========================= Trending Products End ================================ -->

{% schema %}
{
  "name": "Trending Products",
  "class": "trending-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Trending Products"
    },
    {
      "type": "header",
      "content": "Featured Banner"
    },
    {
      "type": "checkbox",
      "id": "show_featured_banner",
      "label": "Show Featured Banner",
      "default": true
    },
    {
      "type": "text",
      "id": "banner_text",
      "label": "Banner Text"
    },
    {
      "type": "image_picker",
      "id": "banner_background",
      "label": "Background Image"
    },
    {
      "type": "image_picker",
      "id": "banner_image_left",
      "label": "Left Image"
    },
    {
      "type": "image_picker",
      "id": "banner_image_right",
      "label": "Right Image"
    }
  ],
  "blocks": [
    {
      "type": "category_tab",
      "name": "Category Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title",
          "default": "All"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Product Collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Trending Products",
      "blocks": [
        {
          "type": "category_tab",
          "settings": {
            "tab_title": "All"
          }
        },
        {
          "type": "category_tab",
          "settings": {
            "tab_title": "Mobile"
          }
        },
        {
          "type": "category_tab",
          "settings": {
            "tab_title": "Headphones"
          }
        }
      ]
    }
  ]
}
{% endschema %}
